---
api_server_namespace: "{{ metal_stack_cloud_namespace }}"
api_server_replicas: 1

api_server_session_secret: geheim
api_server_jwt_token_secret: geheim

api_server_log_level: debug
# this disables sending mails if coupon usage drains
# do not enable this for production use-cases
api_server_log_only: false

api_server_github_client_id: "{{ lookup('env', 'GH_CLIENT_ID') | default('', true) }}"
api_server_github_client_secret: "{{ lookup('env', 'GH_CLIENT_SECRET') | default('', true) }}"
api_server_azure_application_id: "{{ lookup('env', 'AZ_APPLICATION_ID') | default('', true) }}"
api_server_azure_client_secret: "{{ lookup('env', 'AZ_CLIENT_SECRET') | default('', true) }}"
api_server_stripe_secret_key: "{{ metal_stack_cloud_stripe_private_token }}"

api_server_ingress_dns: "api.{{ metal_stack_cloud_ingress_dns }}"
api_server_ingress_tls_enabled: true
api_server_ingress_annotations:

api_server_http_url: https://api.{{ metal_stack_cloud_ingress_dns }}
api_server_frontend_url: https://console.{{ metal_stack_cloud_ingress_dns }}

api_server_masterdata_api_hostname: masterdata-api.metal-control-plane.svc.cluster.local
api_server_masterdata_api_hmac: change-me
api_server_masterdata_api_port: 8443

api_server_metal_api_url: http://metal-api.metal-control-plane.svc.cluster.local:8080
api_server_metal_api_hmac: metal-admin

api_server_auditing_url: http://auditing-meili-meilisearch.{{ auditing_namespace }}.svc.cluster.local:7700
api_server_auditing_key: "{{ metal_stack_cloud_auditing_key }}"
api_server_auditing_interval: "@daily"
api_server_auditing_keep: 10
api_server_auditing_index_prefix: cloud

api_server_gardener_kubeconfig: ""

api_server_pdb_enabled: true
api_server_pdb_min_available: 1

api_server_hpa_enabled: false
api_server_hpa_min: 2
api_server_hpa_max: 5
api_server_hpa_cpu_percentage: 70

api_server_resources:

api_server_mail_provider: none
api_server_mail_smtp_from_name: metalstack.cloud
api_server_mail_smtp_from_address: "info@x-cellent.com"

api_server_mail_mailjet_api_key_public: "{{ lookup('env', 'MJ_APIKEY_PUBLIC') | default('', true) }}"
api_server_mail_mailjet_api_key_private: "{{ lookup('env', 'MJ_APIKEY_PRIVATE') | default('', true) }}"
api_server_mail_mailjet_config:
  # mail_templates: # mapping of mail templates to mailjet template ids
  #   Welcome: 4712279
  #   Admitted: 4727583
  #   CouponPercentageUsedWarning: 4731146
  #   CouponCompletelyUsedWarning: 4731184
  #   PaymentUpdated: 4727758

api_server_hubspot_portal_id: ""
api_server_hubspot_form_guid: ""

api_server_nsqd_address: nsqd:4150

api_server_nsq_set_resource_limits: true
api_server_nsq_nsqd_resources:
  requests:
    memory: "32Mi"
    cpu: "50m"
  limits:
    memory: "256Mi"
    cpu: "1"
api_server_nsq_nsq_lookupd_resources:
  requests:
    memory: "8Mi"
    cpu: "20m"
  limits:
    memory: "100Mi"
    cpu: "1"

api_server_nsq_log_level: info
api_server_nsq_nsqd_data_size: 100Mi

api_server_nsq_image_pull_policy: IfNotPresent
